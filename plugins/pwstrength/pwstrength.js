(function(b){var g=[],m=[],n=[],k=[],p=[],d,f={init:function(a){d=b.extend({bind:"keyup change blur",changeBackground:!0,backgrounds:[["#cc0000","#FFF"],["#cc3333","#FFF"],["#cc6666","#FFF"],["#ff9999","#FFF"],["#e0941c","#FFF"],["#e8a53a","#FFF"],["#eab259","#FFF"],["#efd09e","#FFF"],["#ccffcc","#FFF"],["#66cc66","#FFF"],["#339933","#FFF"],["#006600","#FFF"],["#105610","#FFF"]],passwordValidFrom:rcmail.env.pwstrength_required,onValidatePassword:function(){},onPasswordStrengthChanged:function(){}},
a);for(a=48;58>a;a++)g.push(a);for(a=65;91>a;a++)m.push(a);for(a=97;123>a;a++)n.push(a);for(a=32;48>a;a++)k.push(a);for(a=58;65>a;a++)k.push(a);for(a=91;97>a;a++)k.push(a);for(a=123;127>a;a++)k.push(a);return this.each(b.proxy(function(a,e){p[b(e)]={background:b(e).css("background"),color:b(e).css("color")};q.call(e);b(e).bind(d.bind,function(){q.call(e)})},this))},changeBackground:function(a,c){void 0===c&&(c=a,a=b(this));c=12<c?12:c;b(a).css({"background-color":d.backgrounds[c][0],color:d.backgrounds[c][1]})},
resetStyle:function(a){b(a).css(p[b(a)])}},l=function(a){var b=a+"";a=b.charCodeAt(0);if(55296<=a&&56319>=a){if(1===b.length)return a;b=b.charCodeAt(1);return 1024*(a-55296)+(b-56320)+65536}return a},q=function(){for(var a=0,c=0,e=0,d=0,f=0,h=b(this).val(),a=a+2*Math.floor(h.length/8),j=0;j<h.length;j++)-1!=b.inArray(l(h.charAt(j)),g)&&2>c?(a++,c++):-1!=b.inArray(l(h.charAt(j)),m)&&2>e?(a++,e++):-1!=b.inArray(l(h.charAt(j)),n)&&2>d?(a++,d++):-1!=b.inArray(l(h.charAt(j)),k)&&2>f&&(a++,f++);r.call(b(this),
a);return a},r=function(a){var c=Math.ceil(100*a/12),c=100<c?100:c;d.onPasswordStrengthChanged.call(b(this),a,c);c>=d.passwordValidFrom&&d.onValidatePassword.call(b(this),c);d.changeBackground&&f.changeBackground.call(b(this),a)};b.fn.pStrength=function(a){if(f[a])return f[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return f.init.apply(this,arguments);b.error("Method "+a+" does not exists on jQuery.pStrength")}})(jQuery);
function pwstrength_sync_background(){var b=$("[name='"+rcmail.env.pwstrength_fieldname+"']"),g=$("[name='"+rcmail.env.pwstrength_fieldname_confirm+"']");""!=b.val()&&b.val()==g.val()?$("input[name='"+rcmail.env.pwstrength_fieldname_confirm+"']").attr("style",$("input[name='"+rcmail.env.pwstrength_fieldname+"']").attr("style")):$("input[name='"+rcmail.env.pwstrength_fieldname_confirm+"']").attr("style","");window.setTimeout("pwstrength_sync_background()",200)}
$(document).ready(function(){pwstrength_sync_background();$("input[name='"+rcmail.env.pwstrength_fieldname+"']").pStrength({changeBackground:!1,onPasswordStrengthChanged:function(b,g){$(this).val()?$.fn.pStrength("changeBackground",this,b):$.fn.pStrength("resetStyle",this);$("#"+$(this).data("display")).html(rcmail.gettext("pwstrength.pwstrength").replace("%s",g));$("input[name='_pwstrength']").val(0)},onValidatePassword:function(){rcmail.display_message(rcmail.gettext("pwstrength.continue"),"confirmation");
$("input[name='_pwstrength']").val(1)}})});